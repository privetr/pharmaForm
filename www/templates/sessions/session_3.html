<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	</head>
	
	<body>
		<ion-header-bar class="bar-positive">
			<a class="button button-icon icon ion-chevron-left white" 
               ng-click="vm.popupBack()"> Liste séances</a>
			<h1 class="title">
				<img class="title-image" src="img/home/chuGrenoble.jpg " width="40" height="20" /> 
				Greathe
			</h1>
            <a id="button_save_session" class="button button-icon icon ion-paper-airplane white" ng-click="vm.popupSaveSession()"> Terminer</a>
	  	</ion-header-bar>
	  	
	  	<div class="bar bar-subheader bar-positive">
		  	<h2 class="title"><em class="uppercase">{{vm.patient.lastname}}</em> {{vm.patient.firstname}} - Séance 3</h2>
		</div>
			
        <ion-nav-view>
            <ion-view  title="ETP Greffe Pulmonaire - Choix séance">
                
                <!--<ion-slide-box> 
                    
                    <ion-slide prevent-drag>
                        <ion-content class="has-header has-subheader has-footer">
                            <div class="row">
                                <div class="col col-20 col-offset-20">
                                    <button class="button button-clear icon ion-chevron-left" ng-click="vm.previousSlide()"></button>
                                </div>
                                <div class="col col-20 col-offset-33">
                                    <button class="button button-clear icon ion-chevron-right" ng-click="vm.nextSlide()"></button>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-50" id="drag_1">
                                    http://codef0rmer.github.io/angular-dragdrop/#/filter
                                    http://angular-dragdrop.github.io/angular-dragdrop/
                                    <img style="height: 50px;" src="img/home/chuGrenoble.jpg" data-drag="true" jqyoui-draggable>
                                </div>
                                <div class="col-50" id="id_1">
                                </div>
                            </div>
                            
                            
                        </ion-content>
                    </ion-slide>

			     </ion-slide-box>-->
                <!--<div class="row" style="position: absolute; top:100px; width:100%; z-index:100;">
                    <div class="col-20"></div>
                    <div class="col-10" ng-repeat="value in vm.listHours.values">
                        {{value.name}}
                    </div>
                </div>-->
                
                <ion-content class="has-header has-subheader has-footer">
                    <div class="row" data-drop="true">
                        <em ng-repeat="value in vm.listHours.listMedicine">
                            <em ng-if="value.type === 'antireject'">
                                <img style="height: 50px; z-index:100" src="{{value.medicine.antireject.medicine.imagePath}}"
                                     data-drag="true" jqyoui-draggable="{animate:true}" 
                                     name="{{value.medicine.antireject.medicine.imagePath}}"
                                     ng-model="value.medicine.antireject.medicine.imagePath" jqyoui-options="{revert: 'invalid'}">
                            </em>
                            <em ng-if="value.type === 'antiinfection'">
                                <img style="height: 50px; z-index:100" src="{{value.medicine.antiinfection.medicine.imagePath}}"
                                     data-drag="true" jqyoui-draggable>
                            </em>
                        </em>
                    </div>
                    
                    <div class="item" ng-repeat="med in vm.listHours.listMedicine" ng-init="medIndex = $index" 
                         style="padding-top:20px; z-index:1;">
                        <div class="row">
                            <div class="col-20"></div>
                            <div class="col-10" ng-repeat="hours in med.listHours" ng-if="!med.special">
                                {{hours.name}}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-20 item-text-wrap" style="margin-left:-10px">
                                <em ng-if="med.type === 'antireject'">{{med.medicine.antireject.medicine.name}}</em>
                                <em ng-if="med.type === 'antiinfection'">{{med.medicine.antiinfection.medicine.name}}</em>
                            </div>
                            <div class="col-10" ng-repeat="frequence in med.listHours" ng-if="!med.special" ng-init="medFrequence = $index" >
                                <li class="item item-checkbox">
                                    <label class="checkbox" 
                                           ng-class="{ 'checkbox-assertive': frequence.class === -1,
                                                     'checkbox-balanced': frequence.class === 1
                                                     }">
                                        <input type="checkbox" name="checkbox-{{medIndex}}-{{medFrequence}}"
                                               ng-model="frequence.answerPatient"
                                               ng-change="vm.answerPatientFrequenceChange(frequence, medIndex, medFrequence)"
                                               >
                                    </label>
                                </li>
                            </div>
                        </div>
                        
                        <div class="col">
                            <label class="item item-input">
                                <input type="text" ng-model="med.indication" placeholder="Indication">
                            </label>
                        </div>
                        
                        <div class="col">
                            <label class="item item-input">
                                <input type="text" ng-model="med.comment" placeholder="Commentaire">
                            </label>
                        </div>
                        
                        <div class="row" style="height:80px;"
                             data-drop="true" jqyoui-droppable="{ onDrop : 'dropCallback'}"
                             data-jqyoui-options 
                             >
                            
                        </div>

                    </div>
                </ion-content>
            </ion-view>
        </ion-nav-view>
	</body>
</html>